@model CategoriaViewModel
@{
    ViewData["Title"] = "Películas por Categoría";
}

<div class="container mt-4">
    <h2>Selecciona una Categoría</h2>
    <form method="get" asp-action="Index">
        <div class="form-group">
            <select name="categoria" class="form-control" onchange="this.form.submit()">
                <option value="">-- Seleccione una categoría --</option>
                @foreach (var cat in Model.Categorias)
                {
                    <option value="@cat" selected="@(cat == Model.CategoriaSeleccionada)"> @cat </option>
                }
            </select>
        </div>
    </form>

    @if (Model.Peliculas.Any())
    {
        <h4 class="mt-4">Películas en @Model.CategoriaSeleccionada</h4>
        <ul class="list-group">
            @foreach (var peli in Model.Peliculas)
            {
                <li class="list-group-item"><strong>@peli.Titulo</strong> - Dirigida por @peli.Director</li>
            }
        </ul>
    }
</div>

<div class="container mt-5">
    <a href="/Home/Agregar" class="btn btn-primary">¿Deseas sugerir una película?</a>
</div>
